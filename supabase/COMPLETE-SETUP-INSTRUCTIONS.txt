========================================
COMPLETE DATABASE SETUP - STEP BY STEP
========================================

Yeh complete guide hai naye client-side database setup karne ke liye.
Har step follow karo carefully.

========================================
STEP 1: Naya Supabase Project Banao
========================================

1. Browser mein jao: https://supabase.com
2. Login karo (ya Sign up karo agar account nahi hai)
3. Dashboard mein "New Project" button click karo
4. Project details bharo:
   
   Project Name: SanMiguel Client Database
   Database Password: [Strong password - SAVE THIS!]
   Region: [Apne paas wala select karo]
   Pricing Plan: Free (ya jo chahiye)

5. "Create new project" click karo
6. Wait karo 2-3 minutes (project setup ho raha hai)
7. Jab "Project is ready" dikhe, next step par jao

========================================
STEP 2: Database Tables Banao
========================================

1. Left sidebar mein "SQL Editor" click karo
2. "New query" button click karo
3. Apne computer par yeh file open karo:
   
   üìÅ supabase/NEW-CLIENT-DATABASE-SETUP.sql

4. Poori file ka content COPY karo (Ctrl+A, Ctrl+C)
5. Supabase SQL Editor mein PASTE karo (Ctrl+V)
6. Neeche "RUN" button click karo (ya Ctrl+Enter press karo)
7. Wait karo - queries run ho rahi hain
8. Success messages dekho:
   
   ‚úÖ Extensions enabled!
   ‚úÖ All tables created!
   ‚úÖ All indexes created!
   ‚úÖ RLS enabled on all tables!
   ‚úÖ All RLS policies created!
   ‚úÖ All triggers created!
   ‚úÖ Default clinic inserted!
   ‚úÖ Sample FAQs inserted!
   ‚úÖ Setup Complete!
   ‚úÖ Database is ready for client-side use!

9. Agar koi error aaye:
   - Error message padho
   - Agar "already exists" error hai = Ignore karo, continue karo
   - Agar koi aur error hai = Mujhe batao

========================================
STEP 3: API Keys Copy Karo
========================================

1. Left sidebar mein "Settings" (gear icon) click karo
2. "API" section click karo
3. Yeh 3 cheezein copy karo:

   A) PROJECT URL:
      - "Project URL" heading ke neeche
      - Example: https://abcdefghijklmnop.supabase.co
      - Copy button click karo
      - Notepad mein paste karo

   B) ANON KEY (Public Key):
      - "Project API keys" section mein
      - "anon" "public" label ke saamne
      - Long key hogi (eyJ se start hogi)
      - Copy button click karo
      - Notepad mein paste karo

   C) SERVICE_ROLE KEY:
      - Same section mein
      - "service_role" label ke saamne
      - ‚ö†Ô∏è YEH SECRET HAI - SAMBHAL KE RAKHNA
      - Copy button click karo
      - Notepad mein paste karo

========================================
STEP 4: Environment Variables Setup
========================================

1. Apne project folder mein jao:
   üìÅ C:\Users\DELL\Desktop\pdate agent

2. ".env.local" file dhundo
   - Agar nahi hai to naya banao
   - Right click > New > Text Document
   - Name: .env.local (extension .txt nahi hona chahiye)

3. File open karo (Notepad ya VS Code mein)

4. Yeh lines ADD karo (end mein):

# ========================================
# CLIENT-SIDE DATABASE (New Supabase)
# ========================================
NEXT_PUBLIC_SUPABASE_URL=YOUR_PROJECT_URL_HERE
NEXT_PUBLIC_SUPABASE_ANON_KEY=YOUR_ANON_KEY_HERE
SUPABASE_SERVICE_ROLE_KEY=YOUR_SERVICE_ROLE_KEY_HERE

5. Replace karo:
   - YOUR_PROJECT_URL_HERE = Step 3 se copy kiya hua URL
   - YOUR_ANON_KEY_HERE = Step 3 se copy kiya hua Anon Key
   - YOUR_SERVICE_ROLE_KEY_HERE = Step 3 se copy kiya hua Service Role Key

6. Example (APNI KEYS USE KARO, YEH EXAMPLE HAI):

NEXT_PUBLIC_SUPABASE_URL=https://abcdefghijklmnop.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTcwMDAwMDAwMCwiZXhwIjoyMDE1NTc2MDAwfQ.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNzAwMDAwMDAwLCJleHAiOjIwMTU1NzYwMDB9.yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy

7. File SAVE karo (Ctrl+S)

‚ö†Ô∏è IMPORTANT NOTES:
- Quotes (" ") use MAT karo
- Spaces ya extra lines MAT dalo
- Keys complete copy honi chahiye (bahut lambi hoti hain)
- .env.local file ko Git mein commit MAT karo (already .gitignore mein hai)

========================================
STEP 5: Development Server Restart
========================================

1. Terminal/Command Prompt open karo
2. Project folder mein jao:
   cd "C:\Users\DELL\Desktop\pdate agent"

3. Agar server chal raha hai to STOP karo:
   - Ctrl+C press karo
   - "Y" type karo (agar puche)

4. .next folder DELETE karo (cache clear karne ke liye):
   Remove-Item -Recurse -Force .next

5. Server phir se START karo:
   npm run dev

6. Wait karo jab tak yeh message na aaye:
   ‚úì Ready on http://localhost:3000

========================================
STEP 6: Test Connection
========================================

1. Browser mein jao: http://localhost:3000

2. Admin dashboard open karo:
   http://localhost:3000/admin

3. Browser console open karo:
   - F12 press karo
   - "Console" tab click karo

4. Check karo errors:
   
   ‚úÖ GOOD - Koi error nahi:
      Connection successful!
   
   ‚ùå BAD - "Invalid API key" error:
      .env.local mein keys check karo
      Properly copy hui hain?
   
   ‚ùå BAD - "Failed to fetch" error:
      URL check karo
      https:// hai? .supabase.co domain hai?
   
   ‚ùå BAD - "Network error":
      Internet connection check karo
      Supabase project running hai?

5. Database data check karo:
   - Admin dashboard mein stats dikhne chahiye
   - Clinic data dikhna chahiye
   - FAQs dikhne chahiye

========================================
STEP 7: Verify Tables
========================================

1. Supabase dashboard mein wapas jao
2. "Table Editor" click karo (left sidebar)
3. Yeh tables dikhne chahiye:
   
   ‚úÖ clinics (1 record)
   ‚úÖ patients (0 records - abhi khali)
   ‚úÖ appointments (0 records - abhi khali)
   ‚úÖ interactions (0 records - abhi khali)
   ‚úÖ faqs (5 records)
   ‚úÖ canned_responses (0 records - abhi khali)
   ‚úÖ call_logs (0 records - abhi khali)
   ‚úÖ audit_logs (0 records - abhi khali)

4. "clinics" table click karo:
   - "SanMiguel Clinic" entry dikhni chahiye
   - Phone, email, services dikhen

5. "faqs" table click karo:
   - 5 FAQs dikhne chahiye
   - Questions and answers readable hone chahiye

========================================
TROUBLESHOOTING
========================================

Problem: Tables nahi ban rahe
Solution:
- SQL query phir se run karo
- Errors carefully padho
- Extensions enabled hain? (Step 2 ka first query)

Problem: "Permission denied" error
Solution:
- Service role key use kar rahe ho backend mein?
- RLS policies properly set hain?
- SQL Editor mein check karo: SELECT * FROM clinics;

Problem: Environment variables load nahi ho rahe
Solution:
- .env.local file name correct hai? (no .txt extension)
- Server restart kiya?
- .next folder delete kiya?
- File root folder mein hai?

Problem: Connection timeout
Solution:
- Internet check karo
- Supabase status check karo: https://status.supabase.com
- Firewall/antivirus check karo

Problem: Data nahi dikh raha application mein
Solution:
- Browser console errors check karo
- Network tab mein API calls check karo
- Table names correct hain code mein?

========================================
SECURITY CHECKLIST
========================================

‚úÖ .env.local file .gitignore mein hai
‚úÖ Service role key sirf backend mein use ho raha hai
‚úÖ Anon key client-side mein use ho raha hai
‚úÖ RLS policies enabled hain
‚úÖ Database password strong hai
‚úÖ Keys kisi ko share nahi kiye

========================================
FILES CREATED
========================================

1. NEW-CLIENT-DATABASE-SETUP.sql
   - Complete database setup
   - Tables, indexes, RLS, triggers
   - Default data

2. ENV-SETUP-GUIDE.txt
   - Detailed environment setup
   - API keys guide
   - Security tips

3. COMPLETE-SETUP-INSTRUCTIONS.txt (THIS FILE)
   - Step-by-step complete guide
   - Troubleshooting
   - Verification steps

4. lib/supabase.ts (UPDATED)
   - Table names updated (no prefixes)
   - Connection code ready

========================================
‚úÖ SETUP COMPLETE!
========================================

Agar sab kuch theek hai to:
- Tables ban gaye ‚úÖ
- Environment variables set ho gaye ‚úÖ
- Connection working hai ‚úÖ
- Data dikh raha hai ‚úÖ

Ab aap application use kar sakte ho!

Agar koi problem ho to:
1. Error message carefully padho
2. Troubleshooting section dekho
3. Mujhe batao - main help karunga!
